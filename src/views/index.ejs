<!DOCTYPE html>
<html lang="en">
	<%- include("./partials/head.ejs") %>
	<body>
		<%- include("./partials/header.ejs") %>

		<main>
			<% if (users.length > 0){ %>
			<div class="container mt-4">
				<div class="row">
					<% users.forEach(user => { %>

					<div class="col-auto mb-3">
						<div class="card text-center" style="width: 15rem">
							<img
								src="assets/user-icon.png"
								class="card-img-top mx-auto"
								alt="..."
							/>
							<div class="card-body">
								<h5 class="card-title">
									<%= user.firstName %> <%= user.lastName %>
								</h5>
								<p class="card-text"><%= user._id %></p>
							</div>
							<ul class="list-group list-group-flush">
								<li class="list-group-item"><%= user.email %></li>
								<li class="list-group-item">
									<%= user.active ? 'Ativo' : 'Inativo' %>
								</li>
								<li class="list-group-item">
									Data de Criação: <%= user.dateCreated.toLocaleDateString() %>
								</li>
							</ul>
							<div class="card-body">
								<a href="<%= `edit/${user._id}`  %>" class="card-link"
									>Editar</a
								>
								<button
									value="<%= user._id %>"
									class="card-link btn btn-outline-primary btn-delete"
								>
									Deletar
								</button>
							</div>
						</div>
					</div>

					<% }) %>
				</div>
			</div>
			<% } else { %> <%- include("./partials/message.ejs") %> <% }%>
		</main>

		<script type="text/javascript">
			const message = "<%= message %>";
			switch (message) {
				case "registered":
					alert("Usuário criado com sucesso");
					window.location.href = "/";
					break;

				case "updated":
					alert("Usuário alterado com sucesso");
					window.location.href = "/";
					break;

				case "deleted":
					alert("Usuário deletado com sucesso");
					window.location.href = "/";
			}
		</script>

		<script src="/scripts/home.js"></script>

		<%- include("./partials/scripts.ejs") %>
	</body>
</html>
